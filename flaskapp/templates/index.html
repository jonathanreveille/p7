{% extends "layout.html"%}

{%block content%}

<!-- HTML -->
    <form id="user-text-form">
        <p>
            <label for="userText"></label>
            <input type="text" id="userText" class="input--usertext" name="userText" placeholder="Ajouter votre text ici">
            <input type="submit" value="Envoyer">
        </p>
    </form>
    <!-- HTML end  -->

    <script>
        // JavaScript
        // on déclare une variable form, et on dit qu'elle partie de notre html on souhaite récupérer
        // avec document.querySelector("#nom_de_class_ou_id")
        let form = document.querySelector("#user-text-form");
    
        // On crée une fonction qui agira selon la méthode qu'on définit 
        // dans notr cas, nous souhaitons récupérer ce que  l'user à mi
        function postFormData (url, data, headers) {
        return fetch(url, {
            method:"POST",
            body: data,
            headers : headers,
            })
    
            .then(response => response.json()) //fonction anonyme de ES6
            .catch(error => console.log(error));
        }
    
    
        form.addEventListener("submit", function (event) {
            event.preventDefault();
    
    
        // Envoyer le contenu du formulaire au serveur
            postFormData("/ajax", document.querySelector('#userText').value, {
                "Content-Type": "plain/text"
            })
    
            .then(response => {
                console.log(response);
            })
        })
    </script>
    
{% endblock content %}
